
<div ng-if="!fn.editMode" ng-repeat="(key,obj) in showAssets" class="panel panel-info">
  <div class="panel-heading">
    <div class="row">
      <div class="col-sm-2">
        <h3 class="panel-title">{{obj.assets.length}} Files in&nbsp;{{key}}</h3>
      </div>
      <div class="col-sm-4">
        <form>
          <input type="text" placeholder="filter" ng-model="search.$" class="form-control"/>
        </form>
      </div>
      <div dropdown="dropdown" class="col-sm-4 dropdown">
        <button dropdown-toggle="dropdown-toggle" class="btn btn-success dropdown-toggle pull-right"><i class="fa fa-plus">&nbsp;ADD</i></button>
        <ul role="menu" class="dropdown-menu">
          <li>
            <nodeims-file-upload onstart="upload.functions.onstart()" onprogress="upload.functions.onprogress(percentDone)" onerror="upload.functions.onerror(files, type, msg)" ondone="upload.functions.ondone(files, data)">Upload Files</nodeims-file-upload>
          </li>
          <li><a ng-click="upload.functions.link()" class="btn btn-link btn-block">Add a Link</a></li>
          <li><a ng-click="upload.functions.configureGCalendar()" class="btn btn-link btn-block">Add Calendar</a></li>
        </ul>
      </div>
      <div class="col-sm-1"><a ng-click="fn.edit()" class="btn btn-link"><strong class="text-muted">EDIT</strong></a></div>
      <div class="col-sm-1">
        <div class="btn-group-xs"><a class="btn btn-link"><em>tagTo</em></a><a ng-click="ngDropdown.clearCheckboxes()" class="btn btn-link"><i class="fa fa-times"></i></a></div>
      </div>
      <!--.col-sm-3.pull-right(ng-if="playlistState && showAssets['All']")
      div.pull-right(ng-dropdown-multiselect="",
                      options="ngDropdown.playlist.PlaylistTab.playlists",
                      selected-model="ngDropdown.playlist.selectedPlaylists",
                      events = "ngDropdown.playlist.events",
                      translation-texts="ngDropdown.playlist.customTexts",
                      extra-settings="ngDropdown.playlist.extraSettings",checkboxes="true")
      -->
      <!--.col-sm-3.pull-right(ng-if="playlistState && !showAssets['All']")
      //button.btn.btn-default.pull-right(ng-click="ngDropdown.removeFromPlaylist()"): small.text-danger RemoveFrom Playlist
      a.btn.btn-primary.pull-right(ui-sref="home.assets.playlistAddAssets({playlist:selected.playlist.name})",
                                                  ui-sref-opts="{reload: true, notify: true}") Add/Edit Playlist Assets
      -->
      <!--.col-sm-2.pull-right
      div.pull-right(ng-dropdown-multiselect="",
                      options="ngDropdown.label.Label.labels",
                      selected-model="ngDropdown.label.selectedLabels",
                      events = "ngDropdown.label.events",
                      translation-texts="ngDropdown.label.customTexts",
                      extra-settings="ngDropdown.label.extraSettings",checkboxes="true")
      
      -->
    </div>
  </div>
  <ul as-sortable="sortable.options" ng-model="obj.assets" style="min-height:50px;" class="list-group">
    <li ng-repeat="file in obj.assets | filter:labelFilter | filter:search track by $index" as-sortable-item="as-sortable-item" ng-class="{&quot;list-group-item-danger&quot;:file.deleted}" style="margin:0px;min-height:70px;" class="list-group-item">
      <div as-sortable-item-handle="as-sortable-item-handle" class="row">
        <div class="col-sm-2"><a ng-click="fn.showDetails(file.fileDetails.name)"><img ng-src="{{file.fileDetails.thumbnail}}" class="media-object img-rounded"/>
            <div ng-if="!file.fileDetails.thumbnail" class="letter-box media-object img-rounded">{{file.fileDetails.type.slice(0,1) || 'N'}}</div></a></div>
        <div class="col-sm-10">
          <div class="row">
            <div class="col-sm-6">
              <p>{{file.fileDetails.name }}<small ng-if="playlistState &amp;&amp; !showAssets['All']">&nbsp;{{file.playlistDetails.side}} &nbsp;{{file.playlistDetails.bottom}}</small></p>
            </div>
            <!--.col-sm-2p {{file.fileDetails.size}}
            -->
            <div class="col-sm-3">
              <p ng-if="file.fileDetails.resolution.width" class="text-muted">{{file.fileDetails.resolution.width}}x{{file.fileDetails.resolution.height}}</p>
            </div>
            <div ng-if="playlistState &amp;&amp; !showAssets['All']" class="col-sm-2">
              <p class="text-muted"> {{file.playlistDetails.duration}} seconds</p>
            </div>
            <div class="col-sm-1 pull-right">
              <input type="checkbox" name="checkbox" ng-model="file.selected" ng-if="!playlistState || showAssets['All']" ng-change="ngDropdown.checkbox(file)"/>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <p class="text-muted">{{file.fileDetails.labels.join(',')}}</p>
            </div>
            <div class="col-sm-5">
              <p class="text-muted">{{file.fileDetails.type}},&nbsp;{{file.fileDetails.createdAt | date: 'MMM dd'}}</p>
            </div>
          </div>
        </div>
      </div>
    </li>
    <h5 ng-show="!obj.assets.length" class="text-danger">&nbsp&nbsp Nothing to show, Please Add Assets using the `Add Asset` button</h5>
  </ul>
</div>
<div ng-if="fn.editMode" class="panel panel-danger">
  <div class="panel-heading">
    <div class="panel-title">Rename or delete files, tap Done when completed<a ng-click="fn.edit()" class="pull-right"><strong class="text-success"> Done</strong></a></div>
  </div>
  <ul class="list-group">
    <li ng-repeat="name in names" class="list-group-item">
      <form name="editform" class="row">
        <div ng-class="editform.$dirty?'':fieldStatus" class="form-group col-xs-10">
          <div class="input-group col-xs-12">
            <input type="text" ng-model="name.name" class="form-control"/><span ng-bind="name.ext" ng-hide="editform.$dirty" class="input-group-addon"></span><span ng-click="fn.rename($index)" ng-show="editform.$dirty" class="input-group-btn"><a type="button" class="btn btn-success">SAVE</a></span>
          </div>
        </div>
        <div class="col-xs-2">
          <button ng-click="fn.delete($index)" class="btn btn-danger pull-right"><i class="fa fa-times fa-lg"></i></button>
        </div>
      </form>
    </li>
  </ul>
</div>